<!doctype html>
<html lang="ja">
 <head>

  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">


  <title>Secure Contexts 日本語訳</title>


  <link href="../default.css" rel="stylesheet" type="text/css">


  <style>
  body {
    background: url("https://www.w3.org/StyleSheets/TR/logo-ED") top left no-repeat white;
    background-attachment: fixed;
    color: black;
    font-family: sans-serif;
    margin: 0 auto;
    max-width: 50em;
    padding: 2em 1em 2em 70px;
  }
  :link { color: #00C; background: transparent }
  :visited { color: #609; background: transparent }
  a[href]:active { color: #C00; background: transparent }
  a[href]:hover { background: #ffa }

  a[href] img { border-style: none }

  h1, h2, h3, h4, h5, h6 { text-align: left }
  h1, h2, h3 { color: #005A9C; }
  h1 { font: 170% sans-serif }
  h2 { font: 140% sans-serif }
  h3 { font: 120% sans-serif }
  h4 { font: bold 100% sans-serif }
  h5 { font: italic 100% sans-serif }
  h6 { font: small-caps 100% sans-serif }

  .hide { display: none }

  div.head { margin-bottom: 1em }
  div.head h1 { margin-top: 2em; clear: both }
  div.head table { margin-left: 2em; margin-top: 2em }

  p.copyright { font-size: small }
  p.copyright small { font-size: small }

  pre { margin-left: 2em }
  dt { font-weight: bold }

  ul.toc, ol.toc {
    list-style: none;
  }
  </style>

  <meta content="Bikeshed 1.0.0" name="generator">

  <style>
    .secure {
      fill: #8F8;
    }
    .insecure {
      fill: #F88;
    }
    rect, circle {
      stroke-width: 2;
      stroke: black;
      fill-opacity: 0.75;
    }
    text {
      font-family: monospace;
    }
    g path {
      stroke-width: 2px;
      stroke: #666;
      fill-opacity: 0;
      stroke-dasharray: 5px, 5px;
    }
  </style>
 </head>


 <body class="h-entry">

  <div class="head">

   <p class="note" role="note">
    この文書は、<a href="https://w3c.github.io/webappsec/specs/powerfulfeatures/">Secure Contexts</a> Editor's Draft （2015年9月14日版）の非公式な日本語訳です。正式な文書は英語版のみであることにご注意ください。詳しくは<a href="https://github.com/hashedhyphen/webappsec-specjp/blob/master/README.md">こちら</a>をご覧ください。
   </p>

   <hr title="Separator for header">

   <p data-fill-with="logo">
    <a class="logo" href="http://www.w3.org/"><img alt="W3C" height="48" src="https://www.w3.org/Icons/w3c_home" width="72"></a>
   </p>

   <h1 class="p-name no-ref" id="title">Secure Contexts 日本語訳</h1>

   <h2 class="no-num no-toc no-ref heading settled" id="subtitle">
    <span class="content">Editor’s Draft, <time class="dt-updated" datetime="2015-09-14">14 September 2015</time></span>
   </h2>

   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://w3c.github.io/webappsec/specs/powerfulfeatures/">https://w3c.github.io/webappsec/specs/powerfulfeatures/</a>
     <dt>Latest version:
     <dd><a href="http://www.w3.org/TR/powerful-features/">http://www.w3.org/TR/powerful-features/</a>
     <dt>Previous Versions:
     <dd><a href="http://www.w3.org/TR/2014/WD-powerful-features-20141204/" rel="previous">http://www.w3.org/TR/2014/WD-powerful-features-20141204/</a>
     <dt>Version History:
     <dd><a href="https://github.com/w3c/webappsec/commits/master/specs/powerfulfeatures/index.src.html">https://github.com/w3c/webappsec/commits/master/specs/powerfulfeatures/index.src.html</a>
     <dt>Feedback:
     <dd><span><a href="mailto:public-webappsec@w3.org?subject=%5Bpowerful-features%5D%20YOUR%20TOPIC%20HERE">public-webappsec@w3.org</a> with subject line “<kbd>[powerful-features] <var>… message topic …</var></kbd>” (<a href="http://lists.w3.org/Archives/Public/public-webappsec/" rel="discussion">archives</a>)</span>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/w3c/webappsec/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard" data-editor-id="56384"><a class="p-name fn u-email email" href="mailto:mkwst@google.com">Mike West</a> (<span class="p-org org">Google Inc.</span>)
     <dd class="editor p-author h-card vcard" data-editor-id="75060"><a class="p-name fn u-email email" href="mailto:yzhu@yahoo-inc.com">Yan Zhu</a> (<span class="p-org org">Yahoo! Inc.</span>)
     <dt>Bug Reports:
     <dd><span><a href="https://github.com/w3c/webappsec/issues/new?title=SECURE:%20">via the w3c/webappsec repository on GitHub</a></span>
    </dl>
   </div>

   <div data-fill-with="warning"></div>

   <p class="copyright" data-fill-with="copyright">
    <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2015 <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.
   </p>

   <hr title="Separator for header">
  </div>


  <h2 class="no-num no-toc no-ref heading settled" id="abstract">
   <span class="content">概要</span>
  </h2>

  <div class="p-summary" data-fill-with="abstract">
   <p>
    この仕様は、信頼できる環境に限定して Web に公開する規定を持った機能を実装する際のガイドラインを、ユーザエージェントの実装者ならびに仕様の策定者に提供します。
   </p>
  </div>


  <h2 class="no-num no-toc no-ref heading settled" id="status">
   <span class="content">この文書の位置付け</span>
  </h2>

  <div data-fill-with="status">

   <p>
    この文書は Editor's Draft の公式なコピーです。これは議論のみを目的として提供されており、内容が予告なく変更されることがあります。この文書の内容は W3C に公認されたものではありません。作成中の文書であることを踏まえずにこの文書を引用することはしないでください。
   </p>

   <p>
    <strong>この文書に関する変更点は <a href="https://github.com/w3c/webappsec">https://github.com/w3c/webappsec</a> に記録されるかもしれません。</strong>
   </p>

   <p>
    この仕様に関する議論は、公式メーリングリスト（<a href="http://lists.w3.org/Archives/Public/public-webappsec/">アーカイブ</a>）の <a href="mailto:public-webappsec@w3.org?Subject=%5Bpowerful-features%5D%20PUT%20SUBJECT%20HERE">public-webappsec@w3.org</a> が推奨されています（<a href="http://www.w3.org/Mail/Request">利用の手引き</a>を参照してください）。メールを送る際は、題名には "powerful-features" のように、より良くは "[powerful-features] <em>...コメントの要約...</em>" のように書いてください。
   </p>

   <p>
    この文書は <a href="http://www.w3.org/2011/webappsec/">Web Application Security Working Group</a> によって作成されました。
   </p>

   <p>
    この文書は <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a> の下で活動するグループによって作成されました。W3C は、このグループの成果物に関連する <a href="http://www.w3.org/2004/01/pp-impl/49309/status">開示特許の公開リスト</a> を管理しており、このリストには特許を開示する方法も含まれています。特許について <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> があると考え、実際に特許に関する知識を持っている方は、<a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">W3C Patent Policy の第6章</a> に従って情報を開示しなければなりません。
   </p>

   <p>
    この文書は <a href="http://www.w3.org/2014/Process-20140801/" id="w3c_process_revision">1 August 2014 W3C Process Document</a> によって管理されています。
   </p>

  </div>


  <div data-fill-with="at-risk"></div>

  <h2 class="no-num no-toc no-ref heading settled" id="contents">
   <span class="content">目次</span>
  </h2>

  <div data-fill-with="table-of-contents" role="navigation">
   <ul class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">導入</span></a>
     <ul class="toc">
      <li><a href="#examples"><span class="secno">1.1</span> <span class="content">例</span></a>
       <ul class="toc">
        <li><a href="#examples-top-level"><span class="secno">1.1.1</span> <span class="content">トップレベルのドキュメント</span></a>
        <li><a href="#examples-framed"><span class="secno">1.1.2</span> <span class="content">フレーム内のドキュメント</span></a>
        <li><a href="#examples-workers"><span class="secno">1.1.3</span> <span class="content">Web Workers</span></a>
        <li><a href="#examples-shared-workers"><span class="secno">1.1.4</span> <span class="content">Shared Workers</span></a>
        <li><a href="#examples-service-workers"><span class="secno">1.1.5</span> <span class="content">Service Workers</span></a>
       </ul>
     </ul>
    <li><a href="#terms"><span class="secno">2</span> <span class="content">中心となる概念と用語</span></a>
    <li><a href="#threat-models-risks"><span class="secno">3</span> <span class="content">脅威モデルとリスク</span></a>
     <ul class="toc">
      <li><a href="#threat-models"><span class="secno">3.1</span> <span class="content">脅威モデル</span></a>
       <ul class="toc">
        <li><a href="#threat-passive"><span class="secno">3.1.1</span> <span class="content">ネットワーク上の受動的な攻撃者</span></a>
        <li><a href="#threat-active"><span class="secno">3.1.2</span> <span class="content">ネットワーク上の能動的な攻撃者</span></a>
       </ul>
      <li><a href="#threat-risks"><span class="secno">3.2</span> <span class="content">安全でないコンテキストに関連するリスク</span></a>
     </ul>
    <li><a href="#restrictions"><span class="secno">4</span> <span class="content">機能の制限</span></a>
     <ul class="toc">
      <li><a href="#new"><span class="secno">4.1</span> <span class="content">新しい機能</span></a>
      <li><a href="#legacy"><span class="secno">4.2</span> <span class="content">レガシーな機能</span></a>
       <ul class="toc">
        <li><a href="#legacy-example"><span class="secno">4.2.1</span> <span class="content">例: Geolocation</span></a>
       </ul>
     </ul>
    <li><a href="#detection"><span class="secno">5</span> <span class="content">検査機能</span></a>
    <li><a href="#algorithms"><span class="secno">6</span> <span class="content">アルゴリズム</span></a>
     <ul class="toc">
      <li><a href="#settings-secure"><span class="secno">6.1</span> <span class="content"><var>settings object</var> は安全なコンテキストか？</span></a>
      <li><a href="#is-origin-trustworthy"><span class="secno">6.2</span> <span class="content"><var>オリジン</var> は潜在的に信頼できるか？</span></a>
      <li><a href="#gather-ancestors"><span class="secno">6.3</span> <span class="content"><var>document</var> と関連のある継承元の列挙</span></a>
     </ul>
    <li><a href="#security-considerations"><span class="secno">7</span> <span class="content">セキュリティにおいて考慮すべき事項</span></a>
     <ul class="toc">
      <li><a href="#isolation"><span class="secno">7.1</span> <span class="content">不完全な分離</span></a>
     </ul>
    <li><a href="#implementation-considerations"><span class="secno">8</span> <span class="content">実装において考慮すべき事項</span></a>
     <ul class="toc">
      <li><a href="#packaged-applications"><span class="secno">8.1</span> <span class="content">Packaged Applications</span></a>
      <li><a href="#development-environments"><span class="secno">8.2</span> <span class="content">開発環境</span></a>
     </ul>
    <li><a href="#acknowledgements"><span class="secno">9</span> <span class="content">謝辞</span></a>
    <li><a href="#conformance"><span class="secno"></span> <span class="content">準拠基準</span></a>
     <ul class="toc">
      <li><a href="#conventions"><span class="secno"></span> <span class="content">文書における規約</span></a>
      <li><a href="#conformant-algorithms"><span class="secno"></span> <span class="content">準拠するアルゴリズム</span></a>
      <li><a href="#conformance-classes"><span class="secno"></span> <span class="content">準拠するクラス</span></a>
     </ul>
    <li><a href="#index"><span class="secno"></span> <span class="content">索引</span></a>
     <ul class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">この仕様で定義される用語</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">参考文献で定義される用語</span></a>
     </ul>
    <li><a href="#references"><span class="secno"></span> <span class="content">参考文献</span></a>
     <ul class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">規範的な参考文献</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">情報的な参考文献</span></a>
     </ul>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL の索引</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">問題点の索引</span></a>
   </ul></div>

  <main>

   <section>

    <h2 class="heading settled" data-level="1" id="intro">
     <span class="secno">1. </span><span class="content">導入</span>
     <a class="self-link" href="#intro"></a>
    </h2>

    <p>
     <em>この節は非規範的です。</em>
    </p>

    <p>
     より便利でより強力なアプリケーションが動作できるように Web プラットフォームが拡張されるに従い、アプリケーションに必要な機能の動作範囲が、最小限のセキュリティ境界を満たすコンテキストの中だけであることを保障する必要性が高まっています。この文書では、Web における機能の濫用に対する脅威モデルを説明し、新しい機能を規定する文書が組み込むべき規範的な要件を説明します。
    </p>

    <p>
     ここで議論される要件の中で最も明白なのは、機微もしくは私的なデータにアクセスするアプリケーションのコードが配信されるのは、データの完全性が保障され、認証が行われ、かつ機密性が確保された通信路のみであるべきだということです。安全にコードを配信しても、ユーザのセキュリティとプライバシーという要件をアプリケーションが常に満たすことまで保障はできませんが、これは必要な前提条件です。
    </p>

    <h3 class="heading settled" data-level="1.1" id="examples">
     <span class="secno">1.1. </span><span class="content">例</span><a class="self-link" href="#examples"></a>
    </h3>

    <h4 class="heading settled" data-level="1.1.1" id="examples-top-level">
     <span class="secno">1.1.1. </span><span class="content">トップレベルのドキュメント</span>
     <a class="self-link" href="#examples-top-level"></a>
    </h4>

    <p>
     トップレベルのドキュメントが安全かどうかは、自身のみに依存します。
    </p>

    <div class="example" id="example-f9c0bcaa">
     <a class="self-link" href="#example-f9c0bcaa"></a>

     <p>
      <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#top_level-browsing-context">top-level browsing context</a> の中で開かれた <code>https://example.com/</code> は、認証と暗号化がされている通信路で送信されてきたため、<a data-link-type="dfn" href="#secure-context">安全なコンテキスト</a> です。
     </p>

     <svg height="200" width="400">
      <g transform="translate(10,10)">
       <rect class="secure" height="175" width="297" x="0" y="0"></rect>
       <text transform="translate(10, 20)">https://example.com/</text>
      </g>
     </svg>
    </div>

    <div class="example" id="example-3b4b8bf5">
     <a class="self-link" href="#example-3b4b8bf5"></a>

     <p>
      <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#top_level-browsing-context">top-level browsing context</a> の中で開かれた <code>http://insecure.example.com/</code> が、<code>https://example.com/</code> を含む新しいウィンドウを開いた場合を考えます。前者は安全ではないですが、後者は認証と暗号化がされている通信路で送信されてきたため<a data-link-type="dfn" href="#secure-context">安全なコンテキスト</a>です。開いた側のコンテキストは、ここでの確認の対象にはなりません。
     </p>

     <svg height="400" width="400">
      <g transform="translate(10,10)">
       <rect class="insecure" height="175" width="297" x="0" y="0"></rect>
       <text transform="translate(10, 20)">http://insecure.example.com/</text>
      </g>

      <g transform="translate(10,210)">
       <rect class="secure" height="175" width="297" x="0" y="0"></rect>
       <text transform="translate(10, 20)">https://example.com/</text>
      </g>

      <g>
       <path d="M150, 87 C 200 75, 350 75, 150 287"></path>
      </g>
     </svg>
    </div>

    <h4 class="heading settled" data-level="1.1.2" id="examples-framed">
     <span class="secno">1.1.2. </span><span class="content">フレーム内のドキュメント</span>
     <a class="self-link" href="#examples-framed"></a>
    </h4>

    <p>
     フレーム内のドキュメントが<a data-link-type="dfn" href="#secure-context">安全なコンテキスト</a>とみなせるのは、<a data-link-type="dfn" href="#potentially-trustworthy">潜在的に信頼できる</a> オリジンから送信され、<em>かつ</em>、<a data-link-type="dfn" href="#secure-context">安全なコンテキスト</a>の中に埋め込まれた場合です。以下に例を示します。
    </p>

    <div class="example" id="example-0e744dfe">
     <a class="self-link" href="#example-0e744dfe"></a>

     <p>
      <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#top_level-browsing-context">top-level browsing context</a> の中に開かれた <code>https://example.com/</code> のフレーム内に <code>https://sub.example.com/</code> が開かれた場合、両者ともに認証と暗号化がされている通信路で送信されてきたため、どちらも<a data-link-type="dfn" href="#secure-context">安全なコンテキスト</a>です。
     </p>

     <svg height="200" width="400">
      <g transform="translate(10,10)">
       <rect class="secure" height="175" width="300" x="0" y="0"></rect>
       <text transform="translate(10, 20)">https://example.com/</text>

       <g transform="translate(20, 50)">
        <rect class="secure" height="105" width="250" x="0" y="0"></rect>
        <text transform="translate(10, 20)">https://sub.example.com/</text>
       </g>
      </g>
     </svg>
    </div>

    <div class="example" id="example-107f6828">
     <a class="self-link" href="#example-107f6828"></a>

     <p>
      何らかの理由で <code>https://example.com/</code> が <code>http://insecure.example.com/</code> のフレームを埋め込めた場合（ユーザが混在コンテンツの確認をオーバーライドしているかもしれない？）、トップレベルのフレームは安全なままですが、フレーム内のコンテンツも安全なコンテキストであるとは<em>いえません</em>。
     </p>

     <svg height="200" width="400">
      <g transform="translate(10,10)">
       <rect class="secure" height="175" width="300" x="0" y="0"></rect>
       <text transform="translate(10, 20)">https://example.com/</text>

       <g transform="translate(20, 50)">
        <rect class="insecure" height="105" width="250" x="0" y="0"></rect>
        <text transform="translate(10, 20)">http://insecure.example.com/</text>
       </g>
      </g>
     </svg>
    </div>

    <div class="example" id="example-3d977fc8">
     <a class="self-link" href="#example-3d977fc8"></a>

     <p>
      上の例とは反対に、<code>http://insecure.example.com/</code> の中に <code>https://example.com/</code> のフレームが埋め込まれている場合を考えます。このときの <code>https://example.com/</code> については、継承元が送信された通信路は認証と暗号化がされていないため、安全なコンテキストとは<em>いえません</em>。
     </p>

     <svg height="200" width="400">
      <g transform="translate(10,10)">
       <rect class="insecure" height="175" width="300" x="0" y="0"></rect>
       <text transform="translate(10, 20)">http://insecure.example.com/</text>

       <g transform="translate(20, 50)">
        <rect class="insecure" height="105" width="250" x="0" y="0"></rect>
        <text transform="translate(10, 20)">https://example.com/</text>
       </g>
      </g>
     </svg>
    </div>

    <h4 class="heading settled" data-level="1.1.3" id="examples-workers">
     <span class="secno">1.1.3. </span><span class="content">Web Workers</span>
     <a class="self-link" href="#examples-workers"></a>
    </h4>

    <p>
     Dedicated Web Workers は本質的にフレーム内のドキュメントと似ています。Dedicated Web Workers を安全とみなせるのは、<a data-link-type="dfn" href="#potentially-trustworthy">潜在的に信頼できる</a>オリジンから送信され、かつ、自身をホストしているサイトが <a data-link-type="dfn" href="#secure-context">安全なコンテキスト</a> である場合です。
    </p>

    <div class="example" id="example-4e331849">
     <a class="self-link" href="#example-4e331849"></a>

     <p>
      <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#top_level-browsing-context">top-level browsing context</a> である <code>https://example.com/</code> が <code>https://example.com/worker.js</code> を実行する場合、ドキュメントと Worker はどちらも安全なコンテキストと考えます。
     </p>

     <svg height="200" width="600">
      <g transform="translate(10,10)">
       <rect class="secure" height="175" width="300" x="0" y="0"></rect>
       <text transform="translate(10, 20)">https://example.com/</text>

       <g transform="translate(400, 110)">
        <circle class="secure" r="50"></circle>
        <text transform="translate(-75, -55)">https://example.com/worker.js</text>
       </g>

       <g>
        <path d="M150, 87 C 200 75, 350 75, 405 110"></path>
       </g>
      </g>
     </svg>
    </div>

    <div class="example" id="example-078b3f9a">
     <a class="self-link" href="#example-078b3f9a"></a>

     <p>
      <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#top_level-browsing-context">top-level browsing context</a> である <code>http://insecure.example.com/</code> の中に <code>https://example.com/</code> のフレームが埋め込まれていて、その <code>https://example.com/</code> が <code>https://example.com/worker.js</code> を実行する場合を考えます。この場合は、ドキュメントと Worker のどちらも安全なコンテキストとは考えません。
     </p>

     <svg height="200" width="600">
      <g transform="translate(10,10)">
       <rect class="insecure" height="175" width="297" x="0" y="0"></rect>
       <text transform="translate(10, 20)">http://insecure.example.com/</text>

       <g transform="translate(20, 50)">
        <rect class="insecure" height="105" width="250" x="0" y="0"></rect>
        <text transform="translate(10, 20)">https://example.com/</text>
       </g>

       <g transform="translate(400, 110)">
        <circle class="insecure" r="50"></circle>
        <text transform="translate(-75, -55)">https://example.com/worker.js</text>
       </g>

       <g>
        <path d="M150, 87 C 200 75, 350 75, 405 110"></path>
       </g>
      </g>
     </svg>
    </div>


    <h4 class="heading settled" data-level="1.1.4" id="examples-shared-workers">
     <span class="secno">1.1.4. </span><span class="content">Shared Workers</span>
     <a class="self-link" href="#examples-shared-workers"></a>
    </h4>

    <p>
     Shared Workers は Dedicated Workers と似ていますが、Worker を共有しているドキュメントのそれぞれについて確認する必要があります。
    </p>

    <p class="issue" id="issue-c5802c14">
     <a class="self-link" href="#issue-c5802c14"></a>
     Shared Workers に対する現時点の処理では、Worker の状態が安全か安全でないかは Worker が結び付いているドキュメントに依存してしまいます。これでは開発者に混乱を招くかもしれません。このバグにはいくつかの改善案が提案されています。<a href="https://github.com/w3c/webappsec/issues/406">&lt;https://github.com/w3c/webappsec/issues/406&gt;</a>
    </p>

    <div class="example" id="example-7e3c52b5">
     <a class="self-link" href="#example-7e3c52b5"></a>

     <p>
      <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#top_level-browsing-context">top-level browsing context</a> である <code>https://example.com/</code> が <code>https://example.com/worker.js</code> を Shared Worker として実行する場合、document と worker はどちらも安全なコンテキストとみなされます。
     </p>

     <svg height="200" width="600">
      <g transform="translate(10,10)">
       <rect class="secure" height="175" width="300" x="0" y="0"></rect>
       <text transform="translate(10, 20)">https://example.com/</text>

       <g transform="translate(400, 110)">
        <circle class="secure" r="50"></circle>
        <text transform="translate(-75, -55)">https://example.com/worker.js</text>
       </g>

       <g>
        <path d="M150, 87 C 200 75, 350 75, 405 110"></path>
       </g>
      </g>
     </svg>
    </div>


    <div class="example" id="example-44bac5c8">
     <a class="self-link" href="#example-44bac5c8"></a>

     <p>
      異なる <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#top_level-browsing-context">top-level browsing context</a> （例: 新しいウィンドウ）にある <code>https://example.com/</code> が、同じ shared worker にアクセスする場合、アクセス元のドキュメントはどれも安全であるため、この Shared Worker も安全なコンテキストです。
     </p>

     <svg height="400" width="600">
      <g transform="translate(10,10)">
       <rect class="secure" height="175" width="300" x="0" y="0"></rect>
       <text transform="translate(10, 20)">https://example.com/</text>

       <g transform="translate(400, 110)">
        <circle class="secure" r="50"></circle>
        <text transform="translate(-75, -55)">https://example.com/worker.js</text>
       </g>

       <g>
        <path d="M150, 87 C 200 75, 350 75, 405 110"></path>
       </g>
      </g>

      <g transform="translate(10,200)">
       <rect class="secure" height="175" width="300" x="0" y="0"></rect>
       <text transform="translate(10, 20)">https://example.com/</text>

       <g>
        <path d="M150, 87 C 200 75, 350 75, 405 -80"></path>
       </g>
      </g>
     </svg>
    </div>

    <div class="example" id="example-ba3d2b06">
     <a class="self-link" href="#example-ba3d2b06"></a>

     <p>
      <code>http://insecure.example.com/</code> にネストされた <code>https://example.com/</code> が <code>https://example.com/worker.js</code> を Shared Worker として実行する場合は、ドキュメントと Worker のどちらも安全ではないと考えます。
     </p>

     <svg height="400" width="600">
      <g transform="translate(10,10)">
       <rect class="insecure" height="175" width="300" x="0" y="0"></rect>
       <text transform="translate(10, 20)">http://insecure.example.com/</text>

       <g transform="translate(20, 50)">
        <rect class="insecure" height="105" width="250" x="0" y="0"></rect>
        <text transform="translate(10, 20)">https://example.com/</text>
       </g>

       <g transform="translate(400, 110)">
        <circle class="insecure" r="50"></circle>
        <text transform="translate(-75, -55)">https://example.com/worker.js</text>
       </g>

       <g>
        <path d="M150, 87 C 200 75, 350 75, 405 110"></path>
       </g>
      </g>

      <g transform="translate(10,200)">
       <rect class="secure" height="175" width="300" x="0" y="0"></rect>
       <text transform="translate(10, 20)">https://example.com/</text>

       <g>
        <path d="M150, 87 C 200 75, 350 75, 405 -80"></path>
       </g>
      </g>
     </svg>
    </div>

    <h4 class="heading settled" data-level="1.1.5" id="examples-service-workers">
     <span class="secno">1.1.5. </span><span class="content">Service Workers</span>
     <a class="self-link" href="#examples-service-workers"></a>
    </h4>

    <p>
     Service Workers は安全なコンテキストからのみ登録され、接続できるのは安全なコンテキストにあるクライアントのみであるため、Service Worker は常に安全なコンテキストであり、必ずそうなるのも無理はないでしょう。
    </p>

    <div class="example" id="example-58019791">
     <a class="self-link" href="#example-58019791"></a>

     <p>
      <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#top_level-browsing-context">top-level browsing context</a> の <code>https://example.com/</code> が <code>https://example.com/service.js</code> を登録した場合、ドキュメントと Service Worker はともに安全なコンテキストであると考えます。
     </p>

     <svg height="200" width="600">
      <g transform="translate(10,10)">
       <rect class="secure" height="175" width="300" x="0" y="0"></rect>
       <text transform="translate(10, 20)">https://example.com/</text>

       <g transform="translate(400, 110)">
        <circle class="secure" r="50"></circle>
        <text transform="translate(-75, -55)">https://example.com/service.js</text>
       </g>

       <g>
        <path d="M150, 87 C 200 75, 350 75, 405 110"></path>
       </g>
      </g>
     </svg>
    </div>

   </section>


   <section>

    <h2 class="heading settled" data-level="2" id="terms">
     <span class="secno">2. </span><span class="content">中心となる概念と用語</span>
     <a class="self-link" href="#terms"></a>
    </h2>

    <dl>
     <dt>
      <dfn data-dfn-type="dfn" data-export="" id="secure-context">安全なコンテキスト<a class="self-link" href="#secure-context"></a></dfn>

      <dd>
       ある <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#settings-object">settings object</a> に <a href="#settings-secure">§6.1 settings object は安全なコンテキストか？</a> で定義されるアルゴリズムが適用されて <code>Secure</code> が返された場合、その <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#settings-object">settings object</a> は <strong>安全なコンテキスト</strong> であるといいます。さらに、

       <ul>

        <li>
         ある <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/dom/#interface-document">Document</a></code> に対する <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#global-object">global object</a> の <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#relevant-settings-object-for-a-global-object">relevant settings object</a> に <a href="#settings-secure">§6.1 settings object は安全なコンテキストか？</a> で定義されるアルゴリズムが適用されて <code>Secure</code> が返された場合、その <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/dom/#interface-document">Document</a></code> は <dfn data-dfn-type="dfn" data-export="" id="secure-document">安全なドキュメント<a class="self-link" href="#secure-document"></a></dfn> であるといいます。

       <li>
         ある <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/workers/#worker">Worker</a></code>、<code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/workers/#sharedworker">SharedWorker</a></code>、または <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/service-workers/#service-worker-obj">ServiceWorker</a></code> に対する <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#global-object">global object</a> の <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#relevant-settings-object-for-a-global-object">relevant settings object</a> に <a href="#settings-secure">§6.1 settings object は安全なコンテキストか？</a> で定義されるアルゴリズムが適用されて <code>Secure</code> が返された場合、その <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/workers/#worker">Worker</a></code> は <dfn data-dfn-type="dfn" data-export="" id="secure-worker">安全なワーカー<a class="self-link" href="#secure-worker"></a></dfn> であるといいます。

      </ul>



    </dl>

   </section>


   <section>

    <h2 class="heading settled" data-level="3" id="threat-models-risks">
     <span class="secno">3. </span><span class="content">脅威モデルとリスク</span>
     <a class="self-link" href="#threat-models-risks"></a>
    </h2>

    <p>
     <em>この節は非規範的です。</em>
    </p>

    <h3 class="heading settled" data-level="3.1" id="threat-models">
     <span class="secno">3.1. </span><span class="content">脅威モデル</span>
     <a class="self-link" href="#threat-models"></a>
    </h3>

    <p>
     認証されていないオリジンに権限を与えることは、ネットワーク上に攻撃者がいるため、あらゆるオリジンに権限を与えることと等価です。インターネットの現状はひどいものであり、ネットワーク上に攻撃者がいることを当然のように仮定しなくてはなりません。一般に、ネットワーク上の攻撃者は受動的と能動的との2種類に分類されます。
    </p>

    <h4 class="heading settled" data-level="3.1.1" id="threat-passive">
     <span class="secno">3.1.1. </span><span class="content">ネットワーク上の受動的な攻撃者</span>
     <a class="self-link" href="#threat-passive"></a>
    </h4>

    <p>
     「ネットワーク上の受動的な攻撃者」とは、通信の流れを観察することはできるが、この仕様に関係するレイヤーでの通信を改変することはできない、または意図的に改変しない集団を指します。
    </p>

    <p>
     このように、ネットワークの監視は「通信している人々の承認なしに彼らの意志を裏切り」、そして「誰かが監視を許している限り、人々はその『誰か』をどれだけ慈悲深い存在と考えていようとも、最も非道な連中から自分たちの身を守ることはできない」 <a data-link-type="biblio" href="#biblio-rfc7258">[RFC7258]</a> のです。そのため、この文書で定義されるアルゴリズムは、アプリケーション層におけるデータの完全性だけでなくプライバシーも提供する仕組みを要求しています。
    </p>

    <h4 class="heading settled" data-level="3.1.2" id="threat-active">
     <span class="secno">3.1.2. </span><span class="content">ネットワーク上の能動的な攻撃者</span>
     <a class="self-link" href="#threat-active"></a>
    </h4>

    <p>
     「ネットワーク上の能動的な攻撃者」は、「ネットワーク上の受動的な攻撃者」ができることすべてに加え、ネットワークを流れるあらゆるデータを改変、阻止、再送できる攻撃手段を持っています。セキュリティやプライバシーを揺るがし、個人や団体、さらには国民全体を標的にする潜在的な敵の集団にとって、公共の無線ネットワークを提供、または単に接続しているだけの脆弱なデバイスに限らず、料金の徴収のために通信を操作していながら、セキュリティやプライバシー上の脆弱性を間接的に抱えているインターネットサービスプロバイダ（<a data-link-type="biblio" href="#biblio-verizon">[VERIZON]</a> や <a data-link-type="biblio" href="#biblio-comcast">[COMCAST]</a> が最近の例です）という具合に、対象によってさまざまな攻撃手段をとることができます。
    </p>

    <h3 class="heading settled" data-level="3.2" id="threat-risks">
     <span class="secno">3.2. </span><span class="content">安全でないコンテキストに関連するリスク</span>
     <a class="self-link" href="#threat-risks"></a>
    </h3>

    <p>
     上で述べた脅威からユーザを守るために、特定の Web プラットフォームの持つ、ユーザのセキュリティとプライバシーに大きな影響を与える機能は <a data-link-type="dfn" href="#secure-context">安全なコンテキスト</a> の中でのみ利用可能であるべきです。安全でないコンテキストで機能を利用可能にすると、以下の可能性をネットワーク上の攻撃者に与えてしまう危険を冒します。
    </p>

    <ol>

     <li>
      機微な情報（個人を識別できる情報、資格情報、支払方法など）を閲覧、改変できる可能性。<a data-link-type="biblio" href="#biblio-credential-management">[CREDENTIAL-MANAGEMENT]</a> は機微な情報を扱う API の一例です。

     <li>
      ユーザのデバイス（カメラ、マイクロフォン、そして GPS は特に挙げる価値がありますが、これには加速度計のように明らかな危険性のほとんどないセンサも確かに含まれています）からの入力を閲覧、改変できる可能性。<a data-link-type="biblio" href="#biblio-geolocation-api">[GEOLOCATION-API]</a> や <a data-link-type="biblio" href="#biblio-mediacapture-streams">[MEDIACAPTURE-STREAMS]</a> はセンサの入力を使う機能の歴史的な一例です。

     <li>
      ユーザがアクセスできる他のデバイスの情報にアクセスできる可能性。<a data-link-type="biblio" href="#biblio-discovery">[DISCOVERY]</a> や <a data-link-type="biblio" href="#biblio-bluetooth">[BLUETOOTH]</a> が良い例です。

     <li>
      ある一定時間が経過すると自身をリセットする識別子（例: <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/html5/webstorage.html#the-sessionstorage-attribute">sessionStorage</a></code>）や、ユーザが手動でリセットできる識別子（例: <a data-link-type="biblio" href="#biblio-encrypted-media">[ENCRYPTED-MEDIA]</a>、Cookie <a data-link-type="biblio" href="#biblio-rfc6265">[RFC6265]</a>、そして <a data-link-type="biblio" href="#biblio-indexeddb">[IndexedDB]</a>）、さらにはユーザが容易にはリセットできないハードウェアの特徴を識別するもの、こういったものを含む一時的、ないしは永続的な識別子を使ってユーザを追跡できる可能性。

     <li>
      ブラウザのセッションが切れるまで有効なある状態をオリジンに設定できる可能性。<a data-link-type="biblio" href="#biblio-service-workers">[SERVICE-WORKERS]</a> がとても良い例です。

     <li>
      削除したり覆い隠したり、またはコンテキストをユーザが理解するのに用いる詳細情報を変更するなどして、ブラウザのネイティブな UI を操作できる可能性。例えば <a data-link-type="biblio" href="#biblio-fullscreen">[FULLSCREEN]</a> が挙げられます。

     <li>
      ユーザの許可が必要な機能を組み込める可能性。

    </ol>

    <p>
     このリストにすべて列挙されているわけではありませんが、仕様を作成したり実装する際に考慮すべきリスクに、どういう種類のものがあるかは分かるはずです。
    </p>

    <p class="note" role="note">
     補足: 機能を<a data-link-type="dfn" href="#secure-context">安全なコンテキスト</a>に制限することは極めて重要ですが、そのような情報を運ぶ手段（例えば、新しいネットワークにアクセスする仕組み、または他のネットワークの情報にアクセスするための基本的な機能）も、同じく機微なものとして扱うことを忘れてはいけません。
    </p>

   </section>


   <section>

    <h2 class="heading settled" data-level="4" id="restrictions">
     <span class="secno">4. </span><span class="content">機能の制限</span>
     <a class="self-link" href="#restrictions"></a>
    </h2>

    <h3 class="heading settled" data-level="4.1" id="new">
     <span class="secno">4.1. </span><span class="content">新しい機能</span>
     <a class="self-link" href="#new"></a>
    </h3>

    <p>


     新しい機能に関する仕様を書く著者と編者には、<a href="#settings-secure">§6.1 settings object は安全か？</a>に基づく確認をして機微な API を守ることが推奨されます。良いアプローチの一例として、以下のようなものが挙げられます。


    </p>

    <div class="example" id="example-e045c7ea">
     <a class="self-link" href="#example-e045c7ea"></a>

     <ol>
      <li>
       もし <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#incumbent-settings-object">incumbent settings object</a> が <a data-link-type="dfn" href="#secure-context">安全なコンテキスト</a>でない場合
      <ol>
       <li>
        [ <i>ここに適切な文章を入れてください。 <code>SecurityError</code> が起きた Promise をリジェクトする、エラー時のコールバックを呼び出す、権限リクエストを拒否する、などといった文章が入るかもしれません</i> ] 。
      </ol>
     </ol>

    </div>

    <h3 class="heading settled" data-level="4.2" id="legacy">
     <span class="secno">4.2. </span><span class="content">レガシーな機能</span>
     <a class="self-link" href="#legacy"></a>
    </h3>


    <p>


     先ほど挙げたリストには、現時点で Web に存在し、かつ安全でない通信路でアクセス可能な機能が明らかに含まれています。そのようなレガシーな機能が<a data-link-type="dfn" href="#secure-context">安全なコンテキスト</a>内で利用可能となるよう、現実的な範囲で少しでも早く動き始めることが推奨されます。


    </p>

    <ol>

     <li>
      そのような機能が広く実装されてはいない場合、<a data-link-type="dfn" href="#secure-context">安全なコンテキスト</a>に関する制限を含めるよう、仕様をすぐに<a data-link-type="dfn" href="http://www.w3.org/2014/Process-20140801/#rec-modify">修正する</a>ことを勧めます。

     <li>
      そのような機能が広く実装されているが、広く使われてはいない場合は、<a href="#new">§4.1 新しい機能</a> で述べた確認手順を現存の実装に追加し、それに従って<a data-link-type="dfn" href="http://www.w3.org/2014/Process-20140801/#rec-modify">仕様を修正する</a>ことにより、速やかに機能を<a data-link-type="dfn" href="#secure-context">安全なコンテキスト</a>に制限することを勧めます。

     <li>
      そのような機能が広く使われている場合は、現存の機能を廃止することを勧めます。そして、この文書で説明した制限に仕様が準拠しない旨を記述するために仕様を<a data-link-type="dfn" href="http://www.w3.org/2014/Process-20140801/#rec-modify">修正</a>し、準拠する将来のバージョンを提供して現在のユーザを新しいバージョンに移行させる計画の立案をするべきです。

    </ol>

    <h4 class="heading settled" data-level="4.2.1" id="legacy-example">
     <span class="secno">4.2.1. </span><span class="content">例: Geolocation</span>
     <a class="self-link" href="#legacy-example"></a>
    </h4>

    <p>
     そのような機能の具体例として良いものには <a data-link-type="biblio" href="#biblio-geolocation-api">[GEOLOCATION-API]</a> があります。この機能は広く実装されており、数多くの安全でないサイトで使われています。無理なく改善するための流れは、以下のようになるかもしれません。
    </p>

    <ol>

     <li>
      <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/geolocation-API/#get-current-position">getCurrentPosition()</a></code> や <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/geolocation-API/#watch-position">watchPosition()</a></code> のアルゴリズムを実行する前に [[#settings-secure] の確認を含めるよう、仕様を<a data-link-type="dfn" href="http://www.w3.org/2014/Process-20140801/#rec-modify">修正します</a>。

      <p>
       もし <a href="#settings-secure">§6.1 settings object は安全なコンテキストか？</a> が <code>Not Secure</code> を返す場合、そのアルゴリズムは中断されるべきであり、<code>PERMISSION_DENIED</code> を表す <code>code</code> とともに <var>errorCallback</var> が呼び出されます。
      </p>

     <li>
      安全でないコンテキストにおける API を無効にする明確な意志を、決められた日時に表明するべきであり、それに従って開発者には警告を出すべきです（例えば、コンソールにメッセージを出すなど）。

     <li>
      プログラムの変更日を迎えるための準備として、コードを変更する必要性をサイトの運営者に認識させるため、加えてその期間中のユーザを守るため、単純に API をすべて停止させる前に、ユーザエージェントは廃止のスケジュールを公表するべきです。そのような計画には次のようなものが含まれるかもしれません。

      <ul>

       <li>
        安全でないオリジンに永続的な権限を与えていたことを無効にする

       <li>
        安全でないオリジンで API を利用した際の精度を粗雑にする（高精度のデータではなく市区町村単位のデータを継続的に返すかもしれません）

       <li>
        ユーザとサイトの運営者に対してリスクを伝えるように UI を変更する
      </ul>

    </ol>

   </section>


   <section>

    <h2 class="heading settled" data-level="5" id="detection">
     <span class="secno">5. </span><span class="content">検査機能</span>
     <a class="self-link" href="#detection"></a>
    </h2>

    <p>
     あるコンテキストが、<a data-link-type="dfn" href="#secure-context">安全なコンテキスト</a>を必要とする機能を利用できるか否かを決めるため、単純な真偽値の属性を以下のように global object へ追加します。
    </p>

<pre class="idl">
partial interface <a class="idl-code" data-link-type="interface" href="http://www.w3.org/TR/dom/#interface-window">Window</a> {
  readonly attribute boolean <dfn class="idl-code" data-dfn-for="Window" data-dfn-type="attribute" data-export="" data-readonly="" data-type="boolean " id="dom-window-issecurecontext">isSecureContext<a class="self-link" href="#dom-window-issecurecontext"></a></dfn>;
};

partial interface <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope">WorkerGlobalScope</a> {
  readonly attribute boolean <dfn class="idl-code" data-dfn-for="WorkerGlobalScope" data-dfn-type="attribute" data-export="" data-readonly="" data-type="boolean " id="dom-workerglobalscope-issecurecontext">isSecureContext<a class="self-link" href="#dom-workerglobalscope-issecurecontext"></a></dfn>;
};
</pre>

    <p>
     <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/dom/#interface-window">Window</a></code> の <code class="idl"><a data-link-type="idl" href="#dom-window-issecurecontext">isSecureContext</a></code> 属性と <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope">WorkerGlobalScope</a></code> の <code class="idl"><a data-link-type="idl" href="#dom-workerglobalscope-issecurecontext">isSecureContext</a></code> 属性の両方の getter に関して、この 2 つの getter の <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#global-object">global object</a> における <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#relevant-settings-object-for-a-global-object">relevant settings object</a> へ <a href="#settings-secure">§6.1 settings object は安全なコンテキストか？</a> のアルゴリズムを適用した結果が <code>Secure</code> であった場合、これらの getter は <code>true</code> を返します。そうではない場合は <code>false</code> を返します。
    </p>

   </section>


   <section>

    <h2 class="heading settled" data-level="6" id="algorithms">
     <span class="secno">6. </span><span class="content">アルゴリズム</span>
     <a class="self-link" href="#algorithms"></a>
    </h2>

    <h3 class="heading settled" data-level="6.1" id="settings-secure"> <span class="secno">6.1. </span><span class="content"><var>settings object</var> は安全なコンテキストか？</span>
     <a class="self-link" href="#settings-secure"></a>
    </h3>

    <p>
     ある <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#settings-object">settings object</a> の <var>settings</var> に対して、このオブジェクトが<a data-link-type="dfn" href="#secure-context">安全なコンテキスト</a>である場合、このアルゴリズムは <code>Secure</code> を返し、そうでない場合は <code>Not Secure</code> を返します。
    </p>

    <ol>

     <li>
      <var>settings</var> の <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-https-state">HTTPS state</a> が <code>modern</code> で<strong>ない</strong>とき

     <ol>

      <li>
       <var>origin</var> を <var>settings</var> の <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-3.2">origin</a> とします。

      <li>
       もし <var>origin</var> が <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-2.3">globally unique identifier</a> であるならば、<var>settings</var> の <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#creation-url">creation URL</a> における <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin">origin</a> へ <var>origin</var> を適用します。

       <p class="note" role="note">
        補足: ここではサンドボックス化されたコンテキストを安全なまま維持するため、URL のオリジンを用いています（サンドボックスとは、コンテキストを利用できる範囲とそのリスクを厳しく制限するものであるため）。
       </p>

       <p class="issue" id="issue-091ab16c">
        <a class="self-link" href="#issue-091ab16c"></a>
        ここで必要なプリミティブ値を W3C は定義していないため、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#creation-url">creation URL</a> には WHATWG の HTML を適用しています。
       </p>

      <li>
       <a href="#is-origin-trustworthy">§6.2 オリジンは潜在的に安全なコンテキストか？</a> のアルゴリズムを <var>origin</var> に適用した結果が <code>Potentially Trustworthy</code> で<strong>ない</strong>場合、<code>Not Secure</code> を返します。

     </ol>

     <p class="note" role="note">
      補足: ここでの「潜在的に信頼できる」という語には、<code>http://127.0.0.1</code> のように HTTPS ではないオリジンも含んでいます。
     </p>

     <p class="issue" id="issue-a3d367b1">
      <a class="self-link" href="#issue-a3d367b1"></a>
      <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-https-state">HTTPS state</a> の定義が明確ではありません。例えば、サンドボックス化されたドキュメントは、自身の通信機構に結び付いた <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-https-state">HTTPS state</a> を保持するよう保証するべきです。詳細は <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27190">bug 27190</a> を参照してください。
     </p>

     <li>
      <var>settings</var> の <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#global-object">global object</a> が <code>WorkerGlobalScope</code> である場合、<var>settings</var> の <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#global-object">global object</a> が持っている <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#the-workers-documents">the worker’s <code>Documents</code></a> のリストに含まれる各 <var>document</var> に対して、以下を実行します。

     <ol>

      <li>
       <a href="#gather-ancestors">§6.3 Gather document’s relevant ancestors</a> を <var>document</var> に適用した結果を、<var>document to check</var> に設定します。

      <li>
       <var>documents to check</var> の各 <var>ancestor</var> について

      <ol>

       <li>
        もし <var>ancestor</var> が <a data-link-type="dfn" href="http://www.w3.org/TR/html5/embedded-content-0.html#an-iframe-srcdoc-document">IFrame
        <code>srcdoc</code> <code>Document</code></a> に対応する場合は、次の <var>ancestor</var> へスキップします。

       <li>
        もし <var>ancestor</var> の <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#global-object">global object</a> に対する <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#relevant-settings-object-for-a-global-object">relevant settings object</a> が、<code>modern</code> な <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-https-state">HTTPS state</a> を持っている場合は、次の <var>ancestor</var> へスキップします。

       <li>
        もし <var>ancestor</var> のアクティブな <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#sandboxing-flag-set">sandboxing flag set</a> が、自身の <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#sandboxed-origin-browsing-context-flag">sandboxed origin browsing context flag</a> セットを持っていない場合は、<var>origin</var> を <var>ancestor</var> の <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-3.2">origin</a> とします。そうでなければ、<var>origin</var> を <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin">origin of <var>ancestor</var>’s
         <code>URL</code></a> とします。

       <p class="note" role="note">
        補足: ここではサンドボックス化されたコンテキストを安全なまま維持するため、URL のオリジンを用いています（サンドボックスとは、コンテキストを利用できる範囲とそのリスクを厳しく制限するものであるため）。
       </p>

       <li>
        もし <var>origin</var> に対して <a href="#is-origin-trustworthy">§6.2 オリジンは潜在的に信頼できるか？</a> のアルゴリズムを適用した結果が <code>Potentially Trustworthy</code> で<strong>ない</strong>場合は、<code>Not Secure</code> を返します。

      </ol>

     </ol>

     <p class="note" role="note">
      補足: もし <var>settings</var> が1つ以上の <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/dom/#interface-document">Document</a></code> へマッピング（直接、または <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/workers/#worker">Worker</a></code> の <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/dom/#interface-document">Document</a></code> における1つとして）されている場合は、チェイン全体が安全であることを確認するため、ドキュメントの継承チェインをすべてさかのぼることになります。
     </p>

     <p class="issue" id="issue-a30f61b8">
      <a class="self-link" href="#issue-a30f61b8"></a>
      W3C による Worker の定義は廃止されているため、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#the-workers-documents">the Worker’s <code>Document</code>s</a> には WHATWG の HTML を適用しています。
     </p>

     <li>
      <code>Secure</code> を返します。

    </ol>

    <h3 class="heading settled" data-level="6.2" id="is-origin-trustworthy">
     <span class="secno">6.2. </span><span class="content"><var>オリジン</var> は潜在的に信頼できるか？</span>
     <a class="self-link" href="#is-origin-trustworthy"></a>
    </h3>

    <p>
     特定のオリジンはどんな場合でも潜在的に信頼できます。特に、ユーザエージェントは <code>file</code> URL と、"localhost" に等価なホスト名を持つ URL とを、潜在的に信頼できるものと扱わなくてはなりません（MUST）。原則として、ユーザエージェントはローカルのファイルとローカルの Web サーバは信頼できないものと扱うことができます。しかし、<em>実行時にユーザエージェントが利用可能な情報を考えると</em>、リソースは安全に運ばれてきたものと考えられます。さらに、そのようなリソースを潜在的に信頼できるものと見なすことで、デプロイして公開する前のアプリケーション開発に都合が良くなります。
    </p>

    <p>
     ユーザエージェントは、<code>app:</code> や <code>chrome-extension:</code> のようなベンダー定義の URL スキームに関して、これらを信頼するように拡張してもよいでしょう（MAY）。
    </p>

    <p>
     ある <a data-link-type="dfn" href="https://tools.ietf.org/html/rfc6454#section-3.2">オリジン</a> の <var>origin</var> に対して、以下のアルゴリズムは <code>Potentially Trustworthy</code> か <code>Not Trustworthy</code> のどちらか適切なものを返します。
    </p>

    <ol>

     <li>
      もし <var>origin</var> が <a data-link-type="dfn" href="https://w3c.github.io/webappsec/specs/mixedcontent/#potentially-secure-origin">潜在的に安全なオリジン</a> であれば、<code>Potentially Trustworthy</code> を返します。


      <p class="note" role="note">
       補足: <code>blob:</code> と <code>filesystem:</code> URL のオリジンは、その URL が作られたコンテキストのオリジンです。従って、潜在的に安全なオリジンで作られた blob は潜在的に安全です。<code>data:</code> と <code>javascript:</code> URL のオリジンは opaque identifier であり、これらは潜在的に安全であるとはいえません。
      </p>

     <li>
      もし <var>origin</var> における <code>host</code> の構成部分が <code>localhost.</code> <a data-link-type="biblio" href="#biblio-rfc6761">[RFC6761]</a> であれば、<code>Potentially Trustworthy</code> を返します。

     <li>
      もし <var>origin</var> における <code>host</code> の構成部分が CIDR 記法の <code>127.0.0.0/8</code> または <code>::1/128</code> と一致するならば、<code>Potentially Trustworthy</code> を返します。

     <li>
      もし <var>origin</var> における <code>scheme</code> の構成部分が <code>file</code> であれば、<code>Potentially Trustworthy</code> を返します。

     <li>
      もし <var>origin</var> における <code>scheme</code> の構成部分が、ユーザエージェントが認証できると見なしたものであれば <code>Potentially Trustworthy</code> を返します。

      <p class="note" role="note">
       補足: 詳しくは <a href="#packaged-applications">§8.1 Packaged Applications</a> を参照してください。
      </p>

     <li>
      もし <var>origin</var> が信頼できるオリジンとして設定されているならば、<code>Potentially Trustworthy</code> を返します。

      <p class="note" role="note">
       補足: 詳しくは <a href="#development-environments">§8.2 開発環境</a> を参照してください。
      </p>

     <li>
      <code>Not Trusted</code> を返します。

    </ol>

    <h3 class="heading settled" data-level="6.3" id="gather-ancestors">
     <span class="secno">6.3. </span>
     <span class="content"><var>document</var> と関連のある継承元の列挙</span><a class="self-link" href="#gather-ancestors"></a>
    </h3>

    <p>
     ある <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/dom/#interface-document">Document</a></code> （<var>document</var>） にこのアルゴリズムを適用すると、<var>document</var> が <a data-link-type="dfn" href="#secure-context">安全なコンテキスト</a> かどうかを決定する必要がある <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/dom/#interface-document">Document</a></code> のリストを返します。
    </p>

    <ol>

     <li>
      <var>document</var> が含まれているリストを <var>documents to check</var> に設定します。

     <li>
      <var>document</var> に <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#creator-document">creator <code>Document</code></a> の <var>creator</var> が含まれている間、次の処理を実行します。

     <ol>

      <li>
       もし <var>creator</var> の <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#browsing-context">browsing context</a> が、<var>document</var> の <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#ancestor-browsing-context">ancestor browsing context</a> である場合、

      <ol>
       <li><var>creator</var> を <var>documents to check</var> に挿入します。
       <li><var>document</var> を <var>creator</var> とします。
      </ol>

      <li>
       そうではない場合、

      <ol>
       <li>このループから抜けます。
      </ol>

     </ol>

     <li>
      <var>documents to check</var> を返します。

    </ol>

    <p class="note" role="note">
     補足: ある <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/dom/#interface-document">Document</a></code> の ancestor を列挙するとき、browsing context の creation document のチェインをさかのぼって確認しますが、そのチェインが1つ以上の <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/dom/#interface-window">Window</a></code>
    </p>

   </section>


   <section>

    <h2 class="heading settled" data-level="7" id="security-considerations">
     <span class="secno">7. </span><span class="content">セキュリティにおいて考慮すべき事項</span>
     <a class="self-link" href="#security-considerations"></a>
    </h2>

    <h3 class="heading settled" data-level="7.1" id="isolation">
     <span class="secno">7.1. </span><span class="content">不完全な分離</span>
     <a class="self-link" href="#isolation"></a>
    </h3>

    <p>
     この文書における<a data-link-type="dfn" href="#secure-context">安全なコンテキスト</a>の定義では、あるオリジン上の「安全な」ビューと、同じオリジン上の「安全でない」ビューとが完全に分離されていません。このことは、特定の API における安全なコンテキストの制限を積極的に回避しようとする開発者にとって、新しいウィンドウを開いてその存続性を利用したいときには（新しいウィンドウは新しい top-level browsing context となり、新しいウィンドウが安全かどうかは開く側の状態に関係なく評価されるため）、<code>postMessage</code> といったブリッジを開発者が使えてしまうことを意味します。
    </p>

    <p>
     データを隠し取る手法にはあまり知られていないものも多数あり、共有された <code>localStorage</code> や関連する <code>storage</code>、そして <code>window.name</code> を使ったトリックにまで至ります。
    </p>

   </section>


   <section>

    <h2 class="heading settled" data-level="8" id="implementation-considerations">
     <span class="secno">8. </span><span class="content">実装について考慮すべき事項</span>
     <a class="self-link" href="#implementation-considerations"></a>
    </h2>

    <h3 class="heading settled" data-level="8.1" id="packaged-applications">
     <span class="secno">8.1. </span><span class="content">Packaged Applications</span>
     <a class="self-link" href="#packaged-applications"></a>
    </h3>

    <p>
     Packaged Applications をサポートしているユーザエージェントは、自身でコンテンツを認証した特定の URL スキームからなるホワイトリストを作成しても良いでしょう（MAY）。例えば、Firefox OS アプリケーションのリソースは、<code>scheme</code> の構成部分が <code>app:</code> である URL で参照されます。同様に、Chrome 拡張機能と Chrome アプリは <code>chrome-extension:</code> スキームで動作します。これらを信頼できるオリジンと見なせても無理はないでしょう。
    </p>

    <h3 class="heading settled" data-level="8.2" id="development-environments">
     <span class="secno">8.2. </span><span class="content">開発環境</span>
     <a class="self-link" href="#development-environments"></a>
    </h3>

    <p>
     通常は <a href="#is-origin-trustworthy">§6.2 オリジンは潜在的に信頼できるか？</a> が <code>Not Trusted</code> を返す場合であったとしても、ループバックではないホストでステージングサーバを動かしている開発者を支援するため、ユーザエージェントは、信頼できると見なすオリジンの一覧をユーザが設定できるように許可しても良いでしょう（MAY）。
    </p>

   </section>


   <section>

    <h2 class="heading settled" data-level="9" id="acknowledgements">
     <span class="secno">9. </span><span class="content">謝辞</span>
     <a class="self-link" href="#acknowledgements"></a>
    </h2>

    <p>
     この文書は、Chrome セキュリティチームの <a data-link-type="biblio" href="#biblio-powerful-new-features">[POWERFUL-NEW-FEATURES]</a> における成果に大きく依存しています。これには Chris Palmer、Ryan Sleevi、そして David Dorwin 各氏が特に貢献しています。また、Anne van Kesteren と Henri Sivonen 両氏からとても有益なフィードバックをいただきました。
    </p>

   </section>

  </main>


  <h2 class="no-ref no-num heading settled" id="conformance">
   <span class="content">準拠基準</span>
   <a class="self-link" href="#conformance"></a>
  </h2>

  <h3 class="no-ref no-num heading settled" id="conventions">
   <span class="content">文書における規約</span>
   <a class="self-link" href="#conventions"></a>
  </h3>

  <p>
   準拠基準は、本文中で明示的に注意をしたものと、RFC 2119 用語集とによって表現されます。この文書中の規範的な箇所で現れる "MUST"、"MUST NOT"、"REQUIRED"、"SHALL"、"SHALL NOT"、"SHOULD"、"SHOULD NOT"、"RECOMMENDED"、"MAY"、そして "OPTIONAL" といったキーワードは、RFC 2119 で述べられている通りに解釈されるべきです。しかし、可読性を考慮して、これらの語句が常に大文字で仕様に現れるとは限りません【訳注: 日本語訳において特別の強調が常に行われるとも限りません】。
  </p>

  <p>
   この仕様の文章について、非規範的、例、補足と明示的に書かれた節以外はすべて規範的です <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a>。
  </p>

  <p>
   この仕様における例は、「例えば」の語句で始まるか、規範的な文章とは切り離して以下のように <code>class="example"</code> が伴われています。
  </p>

  <div class="example" id="example-f839f6c8">
   <a class="self-link" href="#example-f839f6c8"></a>
   <p>この例は参考としての例です。</p>
  </div>

  <p>
   参考としての補足は、「補足」の語句で始まるか、規範的な文章とは切り離して以下のように <code>class="note"</code> が伴われています。
  </p>

  <p class="note" role="note">
   これは参考としての補足です。
  </p>

  <h3 class="no-ref no-num heading settled" id="conformant-algorithms">
   <span class="content">準拠するアルゴリズム</span>
   <a class="self-link" href="#conformant-algorithms"></a>
  </h3>

  <p>
   アルゴリズムの部分として命令文で書かれた要件（「先頭にある空白文字をすべて取り除きます」または「false を返し、この手順を中断します」のようなもの）は、アルゴリズムの説明で用いられるキーワード（"must"、"should"、"may" など）とともに解釈されるべきです。
  </p>

  <p>
   アルゴリズムや特定の手順で述べられている準拠基準は、結果が等価である限りにおいて、どのような方法でも解釈することができます。特に、この仕様で定義されるアルゴリズムは理解のしやすさを意識しており、パフォーマンスを意識してはいません。アルゴリズムの実装が最適化されることは実装者に推奨されています。
  </p>

  <h3 class="no-ref no-num heading settled" id="conformance-classes">
   <span class="content">準拠するクラス</span>
   <a class="self-link" href="#conformance-classes"></a>
  </h3>

  <p>
   <dfn data-dfn-type="dfn" data-noexport="" id="conformant-user-agent">準拠するユーザエージェント<a class="self-link" href="#conformant-user-agent"></a></dfn>は、この仕様に挙げられている要件のうち、ユーザエージェントに適用可能なものはすべて実装しなくてはなりません。
  </p>

  <p>
   <dfn data-dfn-type="dfn" data-noexport="" id="conformant-server">準拠するサーバ<a class="self-link" href="#conformant-server"></a></dfn>は、この仕様に挙げられている要件のうち、サーバに適用可能なものはすべて実装しなくてはなりません。
  </p>

  <h2 class="no-num heading settled" id="index">
   <span class="content">索引</span>
   <a class="self-link" href="#index"></a>
  </h2>

  <h3 class="no-num heading settled" id="index-defined-here">
   <span class="content">この仕様で定義される用語</span>
   <a class="self-link" href="#index-defined-here"></a>
  </h3>

  <ul class="indexlist">
   <li><a href="#conformant-server">準拠するサーバ</a><span>、 §番号のない節</span>
   <li><a href="#conformant-user-agent">準拠するユーザエージェント</a><span>、§番号のない節</span>
   <li>isSecureContext
    <ul>
     <li><a href="#dom-window-issecurecontext">Window における属性</a><span>、 §5</span>
     <li><a href="#dom-workerglobalscope-issecurecontext">WorkerGlobalScope における属性</a><span>、 §5</span>
    </ul>
   <li><a href="#potentially-trustworthy">潜在的に信頼できる</a><span>、 §6.2</span>
   <li><a href="#secure-context">安全なコンテキスト</a><span>、§2</span>
   <li><a href="#secure-document">安全なドキュメント</a><span>、§2</span>
   <li><a href="#secure-worker">安全なワーカー</a><span>、§2</span>
  </ul>

  <h3 class="no-num heading settled" id="index-defined-elsewhere">
   <span class="content">参考文献で定義される用語</span>
   <a class="self-link" href="#index-defined-elsewhere"></a>
  </h3>

  <ul class="indexlist">
   <li><a data-link-type="biblio" href="#biblio-dom">[dom]</a> は以下の用語を定義します。
    <ul>
     <li><a href="http://www.w3.org/TR/dom/#interface-document">Document</a>
     <li><a href="http://www.w3.org/TR/dom/#interface-window">Window</a>
    </ul>
   <li><a data-link-type="biblio" href="#biblio-fetch">[FETCH]</a> は以下の用語を定義します。
    <ul>
     <li><a href="https://fetch.spec.whatwg.org/#concept-response-https-state">https state</a>
    </ul>
   <li><a data-link-type="biblio" href="#biblio-geolocation-api">[geolocation-API]</a> は以下の用語を定義します。
    <ul>
     <li><a href="http://www.w3.org/TR/geolocation-API/#get-current-position">getCurrentPosition()</a>
     <li><a href="http://www.w3.org/TR/geolocation-API/#watch-position">watchPosition()</a>
    </ul>
   <li>
    <a data-link-type="biblio" href="#biblio-html">[HTML]</a> は以下の用語を定義します。
    <ul>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#creation-url">creation url</a>
     <li><a href="https://html.spec.whatwg.org/multipage/workers.html#the-workers-documents">the worker's documents</a>
    </ul>
   <li><a data-link-type="biblio" href="#biblio-html5">[html5]</a> は以下の用語を定義します。
    <ul>
     <li><a href="http://www.w3.org/TR/html5/embedded-content-0.html#an-iframe-srcdoc-document">an iframe srcdoc document</a>
     <li><a href="http://www.w3.org/TR/html5/browsers.html#ancestor-browsing-context">ancestor browsing context</a>
     <li><a href="http://www.w3.org/TR/html5/webappapis.html#api-base-url">api base url</a>
     <li><a href="http://www.w3.org/TR/html5/browsers.html#browsing-context">browsing context</a>
     <li><a href="http://www.w3.org/TR/html5/browsers.html#creator-document">creator document</a>
     <li><a href="http://www.w3.org/TR/html5/webappapis.html#global-object">global object</a>
     <li><a href="http://www.w3.org/TR/html5/webappapis.html#incumbent-settings-object">incumbent settings object</a>
     <li><a href="http://www.w3.org/TR/html5/browsers.html#browsing-context-nested-through">nested through</a>
     <li><a href="http://www.w3.org/TR/html5/webappapis.html#relevant-settings-object-for-a-global-object">relevant settings object</a>
     <li><a href="http://www.w3.org/TR/html5/webappapis.html#responsible-document">responsible document</a>
     <li><a href="http://www.w3.org/TR/html5/browsers.html#sandboxed-origin-browsing-context-flag">sandboxed origin browsing context flag</a>
     <li><a href="http://www.w3.org/TR/html5/browsers.html#sandboxing-flag-set">sandboxing flag set</a>
     <li><a href="http://www.w3.org/TR/html5/webstorage.html#the-sessionstorage-attribute">sessionStorage</a>
     <li><a href="http://www.w3.org/TR/html5/webappapis.html#settings-object">settings object</a>
     <li><a href="http://www.w3.org/TR/html5/browsers.html#top_level-browsing-context">top-level browsing context</a>
    </ul>
   <li><a data-link-type="biblio" href="#biblio-mix">[MIX]</a> は以下の用語を定義します。
    <ul>
     <li><a href="https://w3c.github.io/webappsec/specs/mixedcontent/#potentially-secure-origin">potentially secure origin</a>
    </ul>
   <li><a data-link-type="biblio" href="#biblio-rfc6454">[RFC6454]</a> は以下の用語を定義します。
    <ul>
     <li><a href="https://tools.ietf.org/html/rfc6454#section-2.3">globally unique identifier</a>
     <li><a href="https://tools.ietf.org/html/rfc6454#section-3.2">origin</a>
    </ul>
   <li><a data-link-type="biblio" href="#biblio-service-workers">[service-workers]</a> は以下の用語を定義します。
    <ul>
     <li><a href="http://www.w3.org/TR/service-workers/#service-worker-obj">ServiceWorker</a>
    </ul>
   <li><a data-link-type="biblio" href="#biblio-url">[URL]</a> は以下の用語を定義します。
    <ul>
     <li><a href="https://url.spec.whatwg.org/#concept-url-origin">origin of a url</a>
    </ul>
   <li><a data-link-type="biblio" href="#biblio-w3c-process">[W3C-PROCESS]</a> は以下の用語を定義します。
    <ul>
     <li><a href="http://www.w3.org/2014/Process-20140801/#rec-modify">modify a specification</a>
    </ul>
   <li><a data-link-type="biblio" href="#biblio-workers">[workers]</a> は以下の用語を定義します。
    <ul>
     <li><a href="http://www.w3.org/TR/workers/#sharedworker">SharedWorker</a>
     <li><a href="http://www.w3.org/TR/workers/#worker">Worker</a>
    </ul>
   <li><a data-link-type="biblio" href="#biblio-html">[HTML]</a> は以下の用語を定義します。
    <ul>
     <li><a href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope">WorkerGlobalScope</a>
    </ul></ul>
  </ul>


  <h2 class="no-num heading settled" id="references">
   <span class="content">参考文献</span>
   <a class="self-link" href="#references"></a>
  </h2>

  <h3 class="no-num heading settled" id="normative">
   <span class="content">規範的な参考文献</span>
   <a class="self-link" href="#normative"></a>
  </h3>

  <dl>
   <dt id="biblio-fetch"><a class="self-link" href="#biblio-fetch"></a>[FETCH]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/">Fetch</a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-html"><a class="self-link" href="#biblio-html"></a>[HTML]
   <dd>Ian Hickson. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-mix"><a class="self-link" href="#biblio-mix"></a>[MIX]
   <dd>Mike West. <a href="https://w3c.github.io/webappsec/specs/mixedcontent/">Mixed Content</a>. LCWD. URL: <a href="https://w3c.github.io/webappsec/specs/mixedcontent/">https://w3c.github.io/webappsec/specs/mixedcontent/</a>
   <dt id="biblio-rfc4632"><a class="self-link" href="#biblio-rfc4632"></a>[RFC4632]
   <dd>Vince Fuller; Tony Li. <a href="http://www.ietf.org/rfc/rfc4632.txt">Classless Inter-domain Routing (CIDR): The Internet Address Assignment and Aggregation Plan</a>. RFC. URL: <a href="http://www.ietf.org/rfc/rfc4632.txt">http://www.ietf.org/rfc/rfc4632.txt</a>
   <dt id="biblio-rfc6454"><a class="self-link" href="#biblio-rfc6454"></a>[RFC6454]
   <dd>Adam Barth. <a href="http://www.ietf.org/rfc/rfc6454.txt">The Web Origin Concept</a>. RFC. URL: <a href="http://www.ietf.org/rfc/rfc6454.txt">http://www.ietf.org/rfc/rfc6454.txt</a>
   <dt id="biblio-rfc6761"><a class="self-link" href="#biblio-rfc6761"></a>[RFC6761]
   <dd>Stuart Cheshire; Marc Krochmal. <a href="http://www.ietf.org/rfc/rfc6761.txt">Special-Use Domain Names</a>. RFC. URL: <a href="http://www.ietf.org/rfc/rfc6761.txt">http://www.ietf.org/rfc/rfc6761.txt</a>
   <dt id="biblio-url"><a class="self-link" href="#biblio-url"></a>[URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/">URL</a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
   <dt id="biblio-w3c-process"><a class="self-link" href="#biblio-w3c-process"></a>[W3C-PROCESS]
   <dd>Charles McCathie Nevile. <a href="http://www.w3.org/2014/Process-20140801/">World Wide Web Consortium Process Document</a>. URL: <a href="http://www.w3.org/2014/Process-20140801/">http://www.w3.org/2014/Process-20140801/</a>
   <dt id="biblio-dom"><a class="self-link" href="#biblio-dom"></a>[DOM]
   <dd>Anne van Kesteren; et al. <a href="http://www.w3.org/TR/dom/">W3C DOM4</a>. 18 June 2015. LCWD. URL: <a href="http://www.w3.org/TR/dom/">http://www.w3.org/TR/dom/</a>
   <dt id="biblio-geolocation-api"><a class="self-link" href="#biblio-geolocation-api"></a>[geolocation-API]
   <dd>Andrei Popescu. <a href="http://www.w3.org/TR/geolocation-API/">Geolocation API Specification</a>. 28 May 2015. PER. URL: <a href="http://www.w3.org/TR/geolocation-API/">http://www.w3.org/TR/geolocation-API/</a>
   <dt id="biblio-html5"><a class="self-link" href="#biblio-html5"></a>[HTML5]
   <dd>Ian Hickson; et al. <a href="http://www.w3.org/TR/html5/">HTML5</a>. 28 October 2014. REC. URL: <a href="http://www.w3.org/TR/html5/">http://www.w3.org/TR/html5/</a>
   <dt id="biblio-rfc2119"><a class="self-link" href="#biblio-rfc2119"></a>[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-service-workers"><a class="self-link" href="#biblio-service-workers"></a>[SERVICE-WORKERS]
   <dd>Alex Russell; Jungkee Song; Jake Archibald. <a href="http://www.w3.org/TR/service-workers/">Service Workers</a>. 25 June 2015. WD. URL: <a href="http://www.w3.org/TR/service-workers/">http://www.w3.org/TR/service-workers/</a>
   <dt id="biblio-workers"><a class="self-link" href="#biblio-workers"></a>[WORKERS]
   <dd>Ian Hickson. <a href="http://www.w3.org/TR/workers/">Web Workers</a>. 1 May 2012. CR. URL: <a href="http://www.w3.org/TR/workers/">http://www.w3.org/TR/workers/</a>
  </dl>

  <h3 class="no-num heading settled" id="informative">
   <span class="content">情報的な参考文献</span>
   <a class="self-link" href="#informative"></a>
  </h3>

  <dl>
   <dt id="biblio-bluetooth"><a class="self-link" href="#biblio-bluetooth"></a>[BLUETOOTH]
   <dd>Jeffrey Yasskin; Vincent Scheib. <a href="https://webbluetoothcg.github.io/web-bluetooth/">Web Bluetooth</a>. URL: <a href="https://webbluetoothcg.github.io/web-bluetooth/">https://webbluetoothcg.github.io/web-bluetooth/</a>
   <dt id="biblio-comcast"><a class="self-link" href="#biblio-comcast"></a>[COMCAST]
   <dd>David Kravets. <a href="http://arstechnica.com/tech-policy/2014/09/why-comcasts-javascript-ad-injections-threaten-security-net-neutrality/">Comcast Wi-Fi serving self-promotional ads via JavaScript injection</a>. URL: <a href="http://arstechnica.com/tech-policy/2014/09/why-comcasts-javascript-ad-injections-threaten-security-net-neutrality/">http://arstechnica.com/tech-policy/2014/09/why-comcasts-javascript-ad-injections-threaten-security-net-neutrality/</a>
   <dt id="biblio-credential-management"><a class="self-link" href="#biblio-credential-management"></a>[CREDENTIAL-MANAGEMENT]
   <dd>Mike West. <a href="https://w3c.github.io/webappsec/specs/credentialmanagement/">Credential Management</a>. ED. URL: <a href="https://w3c.github.io/webappsec/specs/credentialmanagement/">https://w3c.github.io/webappsec/specs/credentialmanagement/</a>
   <dt id="biblio-discovery"><a class="self-link" href="#biblio-discovery"></a>[DISCOVERY]
   <dd>Rich Tibbett. <a href="https://dvcs.w3.org/hg/dap/raw-file/tip/discovery-api/Overview.html">Network Service Discovery</a>. URL: <a href="https://dvcs.w3.org/hg/dap/raw-file/tip/discovery-api/Overview.html">https://dvcs.w3.org/hg/dap/raw-file/tip/discovery-api/Overview.html</a>
   <dt id="biblio-indexeddb"><a class="self-link" href="#biblio-indexeddb"></a>[IndexedDB]
   <dd>Nikunj Mehta; et al. <a href="http://www.w3.org/TR/IndexedDB/">Indexed Database API</a>. 8 January 2015. REC. URL: <a href="http://www.w3.org/TR/IndexedDB/">http://www.w3.org/TR/IndexedDB/</a>
   <dt id="biblio-powerful-new-features"><a class="self-link" href="#biblio-powerful-new-features"></a>[POWERFUL-NEW-FEATURES]
   <dd>Chrome Security Team. <a href="https://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features">Prefer Secure Origins For Powerful New Features</a>. URL: <a href="https://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features">https://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features</a>
   <dt id="biblio-rfc7258"><a class="self-link" href="#biblio-rfc7258"></a>[RFC7258]
   <dd>Stephen Farrell; Hannes Tschofenig. <a href="http://www.ietf.org/rfc/rfc7258.txt">Pervasive Monitoring Is an Attack</a>. RFC. URL: <a href="http://www.ietf.org/rfc/rfc7258.txt">http://www.ietf.org/rfc/rfc7258.txt</a>
   <dt id="biblio-verizon"><a class="self-link" href="#biblio-verizon"></a>[VERIZON]
   <dd>Mark Bergen; Alex Kantrowitz. <a href="http://adage.com/article/digital/verizon-target-mobile-subscribers-ads/293356/">Verizon looks to target its mobile subscribers with ads</a>. URL: <a href="http://adage.com/article/digital/verizon-target-mobile-subscribers-ads/293356/">http://adage.com/article/digital/verizon-target-mobile-subscribers-ads/293356/</a>
   <dt id="biblio-encrypted-media"><a class="self-link" href="#biblio-encrypted-media"></a>[ENCRYPTED-MEDIA]
   <dd>David Dorwin; et al. <a href="http://www.w3.org/TR/encrypted-media/">Encrypted Media Extensions</a>. 31 March 2015. WD. URL: <a href="http://www.w3.org/TR/encrypted-media/">http://www.w3.org/TR/encrypted-media/</a>
   <dt id="biblio-fullscreen"><a class="self-link" href="#biblio-fullscreen"></a>[FULLSCREEN]
   <dd>Anne van Kesteren; Tantek Çelik. <a href="http://www.w3.org/TR/fullscreen/">Fullscreen</a>. 18 November 2014. NOTE. URL: <a href="http://www.w3.org/TR/fullscreen/">http://www.w3.org/TR/fullscreen/</a>
   <dt id="biblio-mediacapture-streams"><a class="self-link" href="#biblio-mediacapture-streams"></a>[MEDIACAPTURE-STREAMS]
   <dd>Daniel Burnett; et al. <a href="http://www.w3.org/TR/mediacapture-streams/">Media Capture and Streams</a>. 14 April 2015. LCWD. URL: <a href="http://www.w3.org/TR/mediacapture-streams/">http://www.w3.org/TR/mediacapture-streams/</a>
   <dt id="biblio-rfc6265"><a class="self-link" href="#biblio-rfc6265"></a>[RFC6265]
   <dd>A. Barth. <a href="https://tools.ietf.org/html/rfc6265">HTTP State Management Mechanism</a>. April 2011. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc6265">https://tools.ietf.org/html/rfc6265</a>
  </dl>

  <h2 class="no-num heading settled" id="idl-index">
   <span class="content">IDL の索引</span>
   <a class="self-link" href="#idl-index"></a>
  </h2>

<pre class="idl">
partial interface <a class="idl-code" data-link-type="interface" href="http://www.w3.org/TR/dom/#interface-window">Window</a> {
  readonly attribute boolean <a data-readonly="" data-type="boolean " href="#dom-window-issecurecontext">isSecureContext</a>;
};

partial interface <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/workers.html#workerglobalscope">WorkerGlobalScope</a> {
  readonly attribute boolean <a data-readonly="" data-type="boolean " href="#dom-workerglobalscope-issecurecontext">isSecureContext</a>;
};
</pre>

  <h2 class="no-num heading settled" id="issues-index">
   <span class="content">問題点の索引</span>
   <a class="self-link" href="#issues-index"></a>
  </h2>

  <div style="counter-reset:issue">
   <div class="issue">
    Shared Workers に対する現時点の処理では、Worker の状態が安全か安全でないかは Worker が結び付いているドキュメントに依存してしまいます。これでは開発者に混乱を招くかもしれません。このバグにはいくつかの改善案が提案されています。<a href="https://github.com/w3c/webappsec/issues/406">&lt;https://github.com/w3c/webappsec/issues/406&gt;</a><a href="#issue-c5802c14"> ↵ </a>
   </div>

   <div class="issue">
    ここで必要なプリミティブ値を W3C は定義していないため、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#creation-url">creation URL</a> には WHATWG の HTML を適用しています。<a href="#issue-091ab16c"> ↵ </a>
   </div>

   <div class="issue">
    <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-https-state">HTTPS state</a> の定義が明確ではありません。例えば、サンドボックス化されたドキュメントは、自身の通信機構に結び付いた <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-https-state">HTTPS state</a> を保持するよう保証するべきです。詳細は <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27190">bug 27190</a> を参照してください。<a href="#issue-a3d367b1"> ↵ </a>
   </div>

   <div class="issue">
    W3C による Worker の定義は廃止されているため、<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#the-workers-documents">the Worker’s <code>Document</code>s</a> には WHATWG の HTML を適用しています。<a href="#issue-a30f61b8"> ↵ </a>
   </div>
  </div>

 </body>
</html>
